#!/bin/bash

# up to you (me) if you want to run this as a file or copy paste at your leisure

# Improve workflow script
# Stand-alone: run with alias "up"

# Ask for the administrator password upfront
sudo -v

# Let's start with some settings
FORCEFILES_DIRECTORY="${HOME}/.forcefiles"

cd ${FORCEFILES_DIRECTORY}

source ./lib/utils
source ./lib/deps
source ./lib/rvm
source ./lib/gems
source ./lib/apps
source ./lib/subl

# Check for Homebrew
if ! type_exists 'brew'; then
    e_header "Installing Homebrew..."
    ruby -e "$(curl -fsSkL raw.github.com/mxcl/homebrew/go)"
fi

# Check for rvm
if ! type_exists 'rvm'; then
    e_header "Installing Rvm..."
    curl -L https://get.rvm.io | bash -s stable
fi

# Z Tools and Pygmentyze
seek_confirmation "Do you want to install Z Tools and Pygmentyze as dependencies?"

if is_confirmed; then
    run_deps
    e_success "Done!"
else
    echo "Skipped!\n"
fi

# Install RVM
seek_confirmation "Do you want to install RVM?"

if is_confirmed; then
    run_rvm
    e_success "Done!"
else
    echo "Skipped!\n"
fi

# Install RubyGems
seek_confirmation "Do you want to install some RubyGems?"

if is_confirmed; then
    run_gems
    e_success "Done!"
else
    echo "Skipped!\n"
fi

# Install my Applications
seek_confirmation "Do you want to install applications now?"

if is_confirmed; then
    e_header "Seat back a while... this may take several minutes to install..."
    run_apps
    e_success "Done!"
else
    echo "Skipped!\n"
fi

# Ask before config Sublime text
seek_confirmation "Do you want to config your Sublime Text?"

if is_confirmed; then
    run_sublime
    e_success "Sublime text is ready to go!"
else
    echo "Skipped!\n"
fi
