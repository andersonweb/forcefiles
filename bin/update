#!/bin/bash

# up to you (me) if you want to run this as a file or copy paste at your leisure

# Improve workflow script
# Stand-alone: run with alias "up"

# Ask for the administrator password upfront
sudo -v

# Let me introduce myself
clear
figlet Update running...

# Let's start with some settings
FORCEFILES_DIRECTORY="${HOME}/.forcefiles"

cd ${FORCEFILES_DIRECTORY}

source ./lib/utils
source ./lib/rubies
source ./lib/gems
source ./lib/apps

# Check for Homebrew
if ! type_exists 'brew'; then
    e_header "Installing Homebrew..."
    ruby -e "$(curl -fsSkL raw.github.com/mxcl/homebrew/go)"
fi

# Check for rvm
if ! type_exists 'rvm'; then
    e_header "Installing Rvm..."
    curl -L https://get.rvm.io | bash -s stable
fi

# Install Rubies
seek_confirmation "Do you want to install Rubies (~1.9.3 and ~2.0.0)?"

if is_confirmed; then
    run_rubies
    e_success "Done!"
else
    printf "Skipped!\n"
fi

# Install RubyGems
seek_confirmation "Do you want to install your RubyGems?"

if is_confirmed; then
    run_gems
    e_success "Done!"
else
    printf "Skipped!\n"
fi

# Install my Applications
seek_confirmation "Do you want to install applications now?"

if is_confirmed; then
    e_header "Seat back a while... this may take several minutes to install..."
    run_apps
    e_success "Done!"
else
    printf "Skipped!\n"
fi

# Ask before config Sublime text
seek_confirmation "Do you want to config Sublime Text?"

if is_confirmed; then
    run_sublime
    e_success "Sublime Text is ready to go!"
else
    printf "Skipped!\n"
fi

# Ask before config Vim
seek_confirmation "Do you want to config VIM?"

if is_confirmed; then
    run_sublime
    e_success "VIM is ready to go!"
else
    printf "Skipped!\n"
fi
