#!/bin/bash

# ------------------------------------------------------------------------------
# | Homebrew Settings                                                          |
# ------------------------------------------------------------------------------

run_brew() {

    # Check for Homebrew
    if type_exists "brew"; then
        e_header "Updating Homebrew..."
        # Use the latest version of Homebrew
        brew update
        [[ $? ]] && e_success "Done"

        e_header "Updating any existing Homebrew formulae..."
        # Upgrade any already-installed formulae
        brew upgrade
        [[ $? ]] && e_success "Done"

        e_header "Installing Homebrew formulae..."
        local -a desired_formulae=(
            "autoconf"
            "automake"
            "libtool"
            "libyaml"
            "libxslt"
            "libksba"
            "openssl"
            "coreutils"
            "findutils"
            "figlet"
            "bash"
            "bash-completion"
            "wget"
            "ack"
            "tree"
            "git"
            "jpeg"
            "optipng"
            "imagemagick"
            "node"
            "phantomjs"
            "mongodb"
            "erlang"
            "elixir"
            "discount"
            "ctags"
            "https://raw.github.com/Homebrew/homebrew-dupes/master/rsync.rb"
        )

        brew install $list_formulae
        brew install vim --override-system-vi

        # Remove outdated versions from the Cellar
        brew cleanup

    else

        printf "\n"
        e_error "Error: Homebrew not found."
        printf "Aborting...\n"
        exit

    fi

}
